{% extends "base.html" %}

{% block content %}
<!-- Hero Banner Section with Real Photo -->
<section class="hero-banner">
    <div class="hero-content">
        <h1 class="hero-title">Lost Then Found Pet QR Registry</h1>
        <p class="hero-subtitle">Never lose your beloved pet again with our innovative QR code technology</p>
        <a href="{{ url_for('auth.register') }}" class="hero-cta">
            <i class="fas fa-paw"></i> Get Started Today
        </a>
    </div>
</section>

<!-- Quick Search Section -->
<section class="search-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="search-card card">
                    <div class="card-body text-center p-5">
                        <h3 class="mb-3">Found a Pet? üêæ</h3>
                        <p class="text-muted mb-4">Enter the tag ID from the pet's QR code to view their information and contact the owner.</p>
                        <form method="GET" action="" class="row g-3">
                            <div class="col-md-8">
                                <input type="text" class="form-control form-control-lg" name="tag_id" placeholder="Enter Tag ID (e.g., ABC123XY)" required>
                            </div>
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-primary btn-lg w-100">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Process -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5">Simple 3-Step Process</h2>
            <p class="lead">Get your pet protected in minutes</p>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="process-step fade-in">
                    <div class="process-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <h5>1. Register</h5>
                    <p class="text-muted">Create your account and add your pet's information to our secure database.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="process-step fade-in">
                    <div class="process-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <h5>2. Get Your Tag</h5>
                    <p class="text-muted">Receive your unique QR code tag and attach it to your pet's collar.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="process-step fade-in">
                    <div class="process-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h5>3. Peace of Mind</h5>
                    <p class="text-muted">Your pet is now protected! Anyone who finds them can easily contact you.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pet Loss Statistics Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="mb-4">
                    <h2 class="display-6 mb-3">The Reality of Pet Loss</h2>
                    <p class="lead text-primary mb-3">1 in 3 pets will go missing in their lifetime</p>
                    <p class="mb-3">According to the <a href="https://www.animalhumanesociety.org/" target="_blank" rel="noopener" class="text-decoration-none">American Humane Society</a>, approximately <strong>10 million pets</strong> go missing each year in the U.S. alone.</p>
                    <p class="mb-4">While you may not think you could ever lose your pet, it happens more often than you'd think ‚Äî even to the most responsible pet parents. The good news? By taking the right proactive steps, you can dramatically improve your chances of a happy reunion.</p>
                    <div class="d-flex align-items-center">
                        <div class="me-3">
                            <i class="fas fa-shield-alt fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">Best Protection Strategy</h6>
                            <small class="text-muted">Visible ID tags are the most effective way to ensure quick reunification with your pet</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="row text-center">
                    <div class="col-md-6 mb-4">
                        <div class="card border-0 bg-white shadow-sm h-100">
                            <div class="card-body">
                                <div class="display-4 text-primary mb-2">33%</div>
                                <h6>Pets Go Missing</h6>
                                <p class="small text-muted mb-0">1 in 3 pets will go missing during their lifetime</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="card border-0 bg-white shadow-sm h-100">
                            <div class="card-body">
                                <div class="display-4 text-primary mb-2">10M</div>
                                <h6>Annual Missing Pets</h6>
                                <p class="small text-muted mb-0">Missing pets each year in the U.S.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <div class="alert alert-info border-0 bg-primary text-white">
                        <i class="fas fa-lightbulb me-2"></i>
                        <strong>Expert Recommendation:</strong> QR code tags provide instant access to your pet's information, making them more effective than traditional ID tags.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5">Choose Your Plan</h2>
            <p class="lead">Affordable protection for every pet</p>
        </div>
        
        {% if pricing_plans %}
        <div class="row justify-content-center">
            {% set tag_plans = pricing_plans|selectattr("plan_type", "equalto", "tag")|list %}
            {% for plan in tag_plans %}
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100 {% if loop.index0 == 1 %}border-primary{% endif %}">
                    {% if loop.index0 == 1 %}
                    <div class="card-header text-center bg-primary text-white">
                        <small>Most Popular</small>
                    </div>
                    {% endif %}
                    <div class="card-body text-center">
                        <h5 class="card-title">{{ plan.name }}</h5>
                        <h3 class="text-primary">
                            {% if plan.price is not none %}
                            ${{ "%.2f"|format(plan.price) }}
                            {% else %}
                            Contact Us
                            {% endif %}
                            <small class="text-muted">
                                {% if plan.billing_period == 'monthly' %}/month
                                {% elif plan.billing_period == 'yearly' %}/year
                                {% elif plan.billing_period == 'one-time' %} once
                                {% else %}/{{ plan.billing_period }}
                                {% endif %}
                            </small>
                        </h3>
                        {% if plan.description %}
                        <p class="text-muted small">{{ plan.description }}</p>
                        {% endif %}
                        
                        {% if plan.get_features_list() %}
                        <ul class="list-unstyled">
                            {% for feature in plan.get_features_list() %}
                            <li>‚úì {{ feature }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                        
                        <div class="mt-auto">
                            {% if plan.max_pets and plan.max_pets > 0 %}
                            <small class="text-muted d-block">Up to {{ plan.max_pets }} pets per tag</small>
                            {% elif plan.max_pets == 0 %}
                            <small class="text-muted d-block">Unlimited pets per tag</small>
                            {% endif %}
                        </div>
                        
                        <a href="{{ url_for('auth.register') }}?plan={{ plan.id }}" class="btn btn-primary mt-3">
                            Get Started
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <!-- Fallback pricing if no plans are configured -->
        <div class="row justify-content-center">
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <h5 class="card-title">Basic Plan</h5>
                        <h3 class="text-primary">$9.99<small class="text-muted">/month</small></h3>
                        <ul class="list-unstyled">
                            <li>‚úì QR Code Tag</li>
                            <li>‚úì Pet Profile</li>
                            <li>‚úì Direct Messaging</li>
                            <li>‚úì Email Notifications</li>
                        </ul>
                        <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Get Started</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Stats and Features Preview -->
<section class="py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="display-5 mb-4">How LTFPQRR Works</h2>
                <p class="lead mb-4">Our QR code technology helps reunite lost pets with their families quickly and safely.</p>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <a href="{{ url_for('auth.register') }}" class="btn btn-primary btn-lg w-100">
                            <i class="fas fa-user-plus"></i> Get Started
                        </a>
                    </div>
                    <div class="col-md-6 mb-3">
                        <a href="#features" class="btn btn-outline-primary btn-lg w-100">
                            <i class="fas fa-info-circle"></i> Learn More
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="{{ url_for('static', filename='assets/logo/logo.png') }}" alt="LTFPQRR Logo" class="img-fluid" style="max-height: 300px;">
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="stats-section py-5">
    <div class="container">
        <div class="row text-center">
            {% if total_pets and total_pets >= 50 %}
            <div class="col-md-6 mb-4">
                <div class="stats-card fade-in">
                    <div class="stats-number">{{ "{:,}".format(total_pets) }}+</div>
                    <h5>Pets Protected</h5>
                    <p>Pets safely registered in our system</p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="stats-card fade-in">
                    <div class="stats-number">24/7</div>
                    <h5>Instant Access</h5>
                    <p>Your pet's info accessible anytime</p>
                </div>
            </div>
            {% else %}
            <div class="col-md-12 mb-4">
                <div class="stats-card fade-in">
                    <div class="stats-number">24/7</div>
                    <h5>Instant Access</h5>
                    <p>Your pet's info accessible anytime</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5">How It Works</h2>
            <p class="lead">Simple, secure, and effective pet recovery system</p>
        </div>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-qrcode fa-3x text-primary"></i>
                        </div>
                        <h5>QR Code Tags</h5>
                        <p class="text-muted">Durable QR code tags that can be attached to your pet's collar. Each tag has a unique ID linked to your pet's profile.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-mobile-alt fa-3x text-primary"></i>
                        </div>
                        <h5>Instant Access</h5>
                        <p class="text-muted">Anyone who finds your pet can scan the QR code with their smartphone to instantly access your pet's information.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-envelope fa-3x text-primary"></i>
                        </div>
                        <h5>Direct Contact</h5>
                        <p class="text-muted">Finders can contact you directly through our secure messaging system without exposing your personal information.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Partner Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5">Partner Program</h2>
            <p class="lead">Join our partner network and help keep pets safe</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card feature-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="fas fa-handshake fa-3x text-primary"></i>
                        </div>
                        <h5>Become a Partner</h5>
                        <p class="text-muted mb-4">Pet stores, veterinarians, and other pet-related businesses can join our partner program to create and distribute QR tags to their customers.</p>
                        
                        {% if pricing_plans %}
                        {% set partner_plans = pricing_plans|selectattr("plan_type", "equalto", "partner")|list %}
                        {% if partner_plans %}
                        <div class="row">
                            {% for plan in partner_plans %}
                            <div class="col-md-{{ 12 // partner_plans|length if partner_plans|length <= 4 else 3 }} mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>{{ plan.name }}</h6>
                                        <h4 class="text-primary">
                                            {% if plan.price is not none %}
                                            ${{ "%.2f"|format(plan.price) }}
                                            {% else %}
                                            Contact Us
                                            {% endif %}
                                            <small class="text-muted">
                                                {% if plan.billing_period == 'monthly' %}/month
                                                {% elif plan.billing_period == 'yearly' %}/year
                                                {% elif plan.billing_period == 'one-time' %} once
                                                {% else %}/{{ plan.billing_period }}
                                                {% endif %}
                                            </small>
                                        </h4>
                                        {% if plan.description %}
                                        <p class="small text-muted">{{ plan.description }}</p>
                                        {% endif %}
                                        {% if plan.max_tags is not none and plan.max_tags == 0 %}
                                        <p class="small text-muted">Create unlimited tags for your customers</p>
                                        {% elif plan.max_tags and plan.max_tags > 0 %}
                                        <p class="small text-muted">Create up to {{ plan.max_tags }} tags</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <!-- Fallback if no partner plans configured -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Monthly Partner</h6>
                                        <h4 class="text-primary">$29.99<small class="text-muted">/month</small></h4>
                                        <p class="small text-muted">Create unlimited tags for your customers</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Yearly Partner</h6>
                                        <h4 class="text-primary">$299.99<small class="text-muted">/year</small></h4>
                                        <p class="small text-muted">Save 17% with annual billing</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% else %}
                        <!-- Fallback if no pricing plans at all -->
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Monthly Partner</h6>
                                        <h4 class="text-primary">$29.99<small class="text-muted">/month</small></h4>
                                        <p class="small text-muted">Create unlimited tags for your customers</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Yearly Partner</h6>
                                        <h4 class="text-primary">$299.99<small class="text-muted">/year</small></h4>
                                        <p class="small text-muted">Save 17% with annual billing</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        
                        <a href="{{ url_for('auth.register') }}" class="btn btn-primary">Join as Partner</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Statistics Section -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="stats-card">
                    <h3><i class="fas fa-qrcode"></i></h3>
                    <p>QR Code Tags</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stats-card">
                    <h3><i class="fas fa-paw"></i></h3>
                    <p>Registered Pets</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stats-card">
                    <h3><i class="fas fa-heart"></i></h3>
                    <p>Happy Reunions</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="stats-card">
                    <h3><i class="fas fa-users"></i></h3>
                    <p>Active Users</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Handle tag search from homepage
document.addEventListener('DOMContentLoaded', function() {
    // Handle search form submission
    const searchForm = document.querySelector('form[method="GET"]');
    if (searchForm) {
        searchForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const tagId = this.tag_id.value.trim();
            if (tagId) {
                window.location.href = '/found/' + encodeURIComponent(tagId);
            }
        });
    }
});
</script>
{% endblock %}
